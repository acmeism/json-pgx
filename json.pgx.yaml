---
+top: json
boolean:
  .any:
  - .ref: 'true'
  - .ref: 'false'
'false':
  .rgx: 'false'
json:
  .all:
  - .rgx: \s*
  - .any:
    - .ref: map
    - .ref: seq
  - .rgx: \s*
map:
  .all:
  - .rgx: \s*\{\s*
  - +mod: '*'
    .all:
    - .ref: pair
    - .all:
      - .rgx: <WS*>,\s*
      - .ref: pair
  - .rgx: \s*\}\s*
node:
  .any:
  - .ref: map
  - .ref: seq
  - .ref: scalar
'null':
  .rgx: 'null'
number:
  .rgx: ([0-9]+(?:\.[0-9]*)?|\.[0-9]+)
pair:
  .all:
  - .ref: string
  - .rgx: \s*:\s*
  - .ref: node
scalar:
  .any:
  - .ref: string
  - .ref: number
  - .ref: boolean
  - .ref: 'null'
seq:
  .all:
  - .rgx: \s*\[\s*
  - +mod: '*'
    .all:
    - .ref: node
    - .all:
      - .rgx: <WS*>,\s*
      - .ref: node
  - .rgx: \s*\]\s*
string:
  .rgx: '"((?:\\\\|\\"|[^"\n])*)"'
'true':
  .rgx: 'true'
